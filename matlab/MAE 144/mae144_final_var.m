freqD1=200; % 200hz controller loop [Hz]
freqD2=20;  % 20Hz controller loop [Hz]
tD1=1/freqD1;
tD2=1/freqD2;
Vb=7.4; % motor nominal drive voltage [V]
Wf=1760; % Motor armature free run speed at nominal (without gearbox) [rad/s]
sbar=0.003; % Motor armature stall Torque @ V_nominal (without gearbox) [Nm]
GR=35.55556; % gearbox ratio
Im=3.6e-8; % inertia of one motor armature [kg*m^2] (without gearbox)
r=34e-3; % radius of wheel [m]
Mw=27e-3; % mass of one wheel [kg]
Mb=18e-3; % MiP mass [kg]
l=47.7e-3;  % Mip center of mass length [m]
Ib=.000263; % Mip inertia [kg*m^2]
Iw=Mw*r^2 + 2*GR^2*Im;   % inertia of wheels [kg*m^2]
k1=Iw+(Mw+Mb)*r^2;
k2=Mb*r*l;
k3=Ib+Mb*l^2;
k4=2*GR*(1+k2/k1)/(k2^2-k3);
g=9.80665;  %[m^2/s]
k5=Mb*g*l;
k10=k1-k5;
k11=k2-k3;
k12=k10+k11;
k13=4*GR*(sbar-Vb);
k14=k10*Wf/GR;
k15=k5/k12;
k16=k13/k12;
k17=k14/k12;
% phi_dot=Wf/GR;
k=Vb/Wf;
R=k*Vb/sbar;